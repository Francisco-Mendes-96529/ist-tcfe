*-----------------------------------------------------------------------------

.inc uA741.inc

.options savecurrents

Vcc vcc 0 5.0
Vee vee 0 -5.0
Vin in 0 0 ac 1.0 sin(0 10m 1k)

X1 0 inv_in vcc vee out uA741

R1 in inv_in 1k
R2 inv_in out 10k

* load
RL out 0 8

.op
.end

.control

*op
*print all

* time analysis
*tran 1e-5 1e-2
*plot v(out)
*hardcopy vo1.ps v(out)


* frequency analysis
ac dec 10 10 100MEG
*plot vdb(out)
*plot vp(out)
hardcopy vo1f.ps vdb(out)

echo ""
echo "****************"
echo "* Cut-off Freq *"
echo "****************"

* cut-off freqs

let Av_db = vdb(out)-vdb(in)
meas ac voltGainDB MAX Av_db
let Av_m = vm(out)/vm(in)
meas ac voltGain MAX Av_m
let voltG3 = voltGainDB-3
*print voltG3

meas ac lowCOf WHEN Av_db=voltG3
meas ac highCOf WHEN Av_db=voltG3 CROSS=LAST

let avgCOf = sqrt(lowCOf*highCOf)
print avgCOf


echo ""
echo "******************"
echo "* impedance kohm *"
echo "******************"
*input impedance in kohm
print abs(v(in)[20]/vin#branch[20]/1000)

*need a different setup to measure output impedance

quit
.endc 

